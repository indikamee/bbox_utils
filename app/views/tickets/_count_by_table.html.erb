<% count_grps = tickets.where(state: [:sold, :paid]).group(:table_id).count.sort_by {|x,y| x.to_i}%>
<table class="table table-striped table-bordered" id='table_summary' data-turbolinks="false">
  <thead>
    <tr>
      <th>Table Id</th>
      <th>Head Count</th>
    </tr>
  </thead>
    <tbody>
      <% total = 0 %>
      <% count_grps.each do |g| %>
      <tr>
      <td><%= link_to "Table #{g[0]}", show_tickets_event_path(@event, table_id: g[0])%></td>
      <td align="right"><%=g[1]%></td>
      <% total = total + g[1] %>
      
      </tr>
      <%end%>
      <tr>
      <td>Total</td>
      <td align="right"><%=total%></td>
      </tr>
  </tbody>
</table>
