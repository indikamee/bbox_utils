<%= form_with(model: ticket, local: true) do |form| %>
  <% if ticket.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(ticket.errors.count, "error") %> prohibited this ticket from being saved:</h2>

      <ul>
      <% ticket.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= form.label :event_id %>
    <%= form.text_field :event_id , class:"form-control", readonly: true%>
  </div>

  <div class="field">
    <%= form.label :seq %>
    <%= form.text_field :seq , class:"form-control", readonly: true%>
  </div>

  <div class="field">
    <%= form.label :ticket_type %>
    <%= form.text_field :ticket_type , class:"form-control", readonly: true%>
  </div>

  <div class="field">
    <%= form.label :price %>
    <% if can? :edit, ticket.event %>
      <%= form.text_field :price , class:"form-control"  %>
    <% else %>
        <%= form.text_field :price , class:"form-control", readonly: true  %>
    <% end %>

  </div>

  <div class="field">
    <%= form.label :agent_id %>
    <%= form.collection_select :agent_id, @agents.sort_by(&:name), :id, :name, {:prompt=>true, :include_blank => true}, class:"form-control", :required => false %>
  </div>

  <div class="field">
    <%= form.label :person_id %>
    <%= form.collection_select :person_id, @people.sort_by(&:name), :id, :name, {:prompt=>true, :include_blank => true}, class:"form-control", :required => false %>
    <%= link_to 'New Person', new_person_path , class: 'btn btn-info' %>
  </div>

  <div class="field">
    <%= form.label :state %>
    <%= form.select :state , Ticket::STATES, {}, {class:'form-control'} %>
  </div>

  <div class="field">
    <%= form.label :notes %>
    <%= form.text_area :notes, class:"form-control", :required => false %>
  </div>


  <div class="field">
    <%= form.label :table_id %>
    <%= form.text_field :table_id, class:"form-control", :required => false %>
  </div>
    <div class="field">
    <%= form.label :attnded_at %>
    <%= form.datetime_field :attended_at, class:"form-control", :required => false %>
  </div>

  <div class="actions">
    <%= form.submit class: 'btn btn-primary'  %>
  </div>
<% end %>
